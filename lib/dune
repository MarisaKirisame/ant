(library
 (name optimus)
 (libraries pprint)
 (modules
   Lexer
   Tokens
   Parser
   Syntax)
 (preprocess
   (staged_pps
     ppx_string)))

(ocamllex Lexer)

(menhir
 (modules Tokens)
 (explain false)
 (flags --only-tokens))

(menhir
 (modules Parser Tokens)
 (merge_into Parser)
 (explain true)
 (flags --external-tokens Tokens --unused-tokens --unused-precedence-levels --exn-carries-state))
